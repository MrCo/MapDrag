<!DOCTYPE html>
<html>
<head>
    <meta charset="gb2312"/>
    <title>µØÍ¼¶¨Î»</title>
    <style type='text/css'>
        * {
            padding: 0px;
            margin: 0px;
            border: 0px;
        }

        .drag {
            position: absolute;
            width: 60px;
            height: 60px;
            background: black;
            cursor: move;
        }

        .container{ width:50%; height: 300px; border: 1px solid #ccc; margin-left:100px; margin-top:100px; }
    </style>
</head>
<body>
<div id='drag' class='drag'></div>
<div class='container'></div>
<script type='text/javascript' src='jquery.js'></script>
<script type="text/javascript">
    $(function () {
        var _drag = false,
            _containerUp = false,
            _left = 0,
            _top = 0;

        $(document).bind('mousemove',function (e) {
            if (!_drag) {
                $('#dragDiv').css({ top: e.clientY - 30 + 'px', left: e.clientX - 30 + 'px' });
            }
        }).bind('mouseup', function () {
                    console.log(_containerUp);
                    _drag = true;
                    if(_containerUp == true){
                        $('.container').append($('#dragDiv').removeAttr('id'));
                        $('#dragDiv').remove();
                    }else{
                        $('#dragDiv').animate({ top: _top + 'px', left: _left + 'px' }, 500, function () {
                            $(this).remove();
                        });
                    }
                });

        $('#drag').bind('mousedown', function (e) {
            var $cur = $(this),
                    $clone = $cur.clone();
            _left = $cur.offset().left;
            _top = $cur.offset().top;
            $clone.attr('id', 'dragDiv').css({ background:'red', opacity: 0.3, top: e.clientY - 30 + 'px', left: e.clientX - 30 + 'px' });
            $(document.body).append($clone);
            _drag = false;
        });

        $('.container').hover(function(){
            _containerUp = true;
        },function(){
           //_containerUp = false;
        });
    });
</script>
</body>
</html>